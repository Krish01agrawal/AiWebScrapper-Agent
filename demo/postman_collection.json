{
	"info": {
		"_postman_id": "ai-web-scraper-demo",
		"name": "AI Web Scraper API - Demo Collection",
		"description": "Complete API reference with example requests and responses for the AI Web Scraper API\n\nNOTE: Example responses in this collection are placeholders. To get real example responses:\n1. Start the API server\n2. Send each request in Postman\n3. Save the response as an example (right-click response → Save Response → Save as example)\n4. Re-export the collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Health Checks",
			"item": [
				{
					"name": "Overall Health",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has status field', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('status');",
									"});",
									"",
									"pm.test('Response has components', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('components');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": ["{{base_url}}"],
							"path": ["health"]
						},
						"description": "Get overall system health status including all components"
					},
					"response": []
				},
				{
					"name": "Database Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health/database",
							"host": ["{{base_url}}"],
							"path": ["health", "database"]
						},
						"description": "Check MongoDB connection status and database health"
					},
					"response": []
				},
				{
					"name": "Cache Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health/cache",
							"host": ["{{base_url}}"],
							"path": ["health", "cache"]
						},
						"description": "Check cache system status and statistics"
					},
					"response": []
				},
				{
					"name": "Workflow Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/scrape/health",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape", "health"]
						},
						"description": "Check workflow orchestrator health status"
					},
					"response": []
				}
			],
			"description": "Health check endpoints for system monitoring"
		},
		{
			"name": "Scrape Endpoints",
			"item": [
				{
					"name": "AI Tools Query",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 200', function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test('Response has status field', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('status');",
									"});",
									"",
									"pm.test('Response has query field', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('query');",
									"});",
									"",
									"pm.test('Response has results field', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('results');",
									"});",
									"",
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.test('Success response has expected structure', function () {",
									"        pm.expect(jsonData.status).to.equal('success');",
									"        pm.expect(jsonData).to.have.property('execution_metadata');",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"Best AI agents for coding and software development\",\n  \"timeout_seconds\": 180,\n  \"store_results\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
					"description": "Example query for AI tools category. Expected response time: 30-90 seconds."
				},
				"response": [
					{
						"name": "Success Response - AI Tools Query",
						"originalRequest": {
							"method": "POST",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"body": {
								"mode": "raw",
								"raw": "{\n  \"query\": \"Best AI agents for coding and software development\",\n  \"timeout_seconds\": 180,\n  \"store_results\": true\n}"
							},
							"url": {
								"raw": "{{base_url}}/api/v1/scrape",
								"host": ["{{base_url}}"],
								"path": ["api", "v1", "scrape"]
							}
						},
						"status": "OK",
						"code": 200,
						"_postman_previewlanguage": "json",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"cookie": [],
						"body": "{\n  \"status\": \"success\",\n  \"timestamp\": \"2024-01-01T12:00:00Z\",\n  \"request_id\": \"req_12345\",\n  \"query\": {\n    \"text\": \"Best AI agents for coding and software development\",\n    \"category\": \"ai_tools\",\n    \"confidence_score\": 0.95\n  },\n  \"results\": {\n    \"total_items\": 12,\n    \"processed_items\": 10,\n    \"success_rate\": 0.83,\n    \"processed_contents\": []\n  },\n  \"analytics\": {\n    \"pages_scraped\": 15,\n    \"processing_time_breakdown\": {},\n    \"quality_metrics\": {}\n  },\n  \"execution_metadata\": {\n    \"execution_time_ms\": 45230.5,\n    \"stages_timing\": {}\n  },\n  \"cached\": false,\n  \"cache_age_seconds\": 0\n}"
					}
				]
			},
				{
					"name": "Mutual Funds Query",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"Best mutual funds for beginners with low risk\",\n  \"timeout_seconds\": 180,\n  \"store_results\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
					"description": "Example query for mutual funds/investment category"
				},
				"response": [
					{
						"name": "Success Response - Mutual Funds Query",
						"originalRequest": {
							"method": "POST",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"body": {
								"mode": "raw",
								"raw": "{\n  \"query\": \"Best mutual funds for beginners with low risk\",\n  \"timeout_seconds\": 180,\n  \"store_results\": true\n}"
							},
							"url": {
								"raw": "{{base_url}}/api/v1/scrape",
								"host": ["{{base_url}}"],
								"path": ["api", "v1", "scrape"]
							}
						},
						"status": "OK",
						"code": 200,
						"_postman_previewlanguage": "json",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"cookie": [],
						"body": "{\n  \"status\": \"success\",\n  \"timestamp\": \"2024-01-01T12:00:00Z\",\n  \"request_id\": \"req_67890\",\n  \"query\": {\n    \"text\": \"Best mutual funds for beginners with low risk\",\n    \"category\": \"mutual_funds\",\n    \"confidence_score\": 0.92\n  },\n  \"results\": {\n    \"total_items\": 10,\n    \"processed_items\": 8,\n    \"success_rate\": 0.80,\n    \"processed_contents\": []\n  },\n  \"analytics\": {\n    \"pages_scraped\": 12,\n    \"processing_time_breakdown\": {},\n    \"quality_metrics\": {}\n  },\n  \"execution_metadata\": {\n    \"execution_time_ms\": 38500.0,\n    \"stages_timing\": {}\n  },\n  \"cached\": false,\n  \"cache_age_seconds\": 0\n}"
					}
				]
			},
				{
					"name": "General Query",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"Latest trends in artificial intelligence\",\n  \"timeout_seconds\": 180,\n  \"store_results\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
					"description": "Example general query for technology trends"
				},
				"response": [
					{
						"name": "Success Response - General Query",
						"originalRequest": {
							"method": "POST",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"body": {
								"mode": "raw",
								"raw": "{\n  \"query\": \"Latest trends in artificial intelligence\",\n  \"timeout_seconds\": 180,\n  \"store_results\": true\n}"
							},
							"url": {
								"raw": "{{base_url}}/api/v1/scrape",
								"host": ["{{base_url}}"],
								"path": ["api", "v1", "scrape"]
							}
						},
						"status": "OK",
						"code": 200,
						"_postman_previewlanguage": "json",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"cookie": [],
						"body": "{\n  \"status\": \"success\",\n  \"timestamp\": \"2024-01-01T12:00:00Z\",\n  \"request_id\": \"req_abc123\",\n  \"query\": {\n    \"text\": \"Latest trends in artificial intelligence\",\n    \"category\": \"general\",\n    \"confidence_score\": 0.88\n  },\n  \"results\": {\n    \"total_items\": 15,\n    \"processed_items\": 12,\n    \"success_rate\": 0.80,\n    \"processed_contents\": []\n  },\n  \"analytics\": {\n    \"pages_scraped\": 18,\n    \"processing_time_breakdown\": {},\n    \"quality_metrics\": {}\n  },\n  \"execution_metadata\": {\n    \"execution_time_ms\": 52100.0,\n    \"stages_timing\": {}\n  },\n  \"cached\": false,\n  \"cache_age_seconds\": 0\n}"
					}
				]
			},
				{
					"name": "With Custom Config",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"AI tools for image generation\",\n  \"processing_config\": {\n    \"enable_ai_analysis\": true,\n    \"enable_summarization\": true,\n    \"max_summary_length\": 300,\n    \"enable_duplicate_detection\": true\n  },\n  \"timeout_seconds\": 180,\n  \"store_results\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
					"description": "Query with custom processing configuration overrides"
				},
				"response": [
					{
						"name": "Success Response - Custom Config",
						"originalRequest": {
							"method": "POST",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"body": {
								"mode": "raw",
								"raw": "{\n  \"query\": \"AI tools for image generation\",\n  \"processing_config\": {\n    \"enable_ai_analysis\": true,\n    \"enable_summarization\": true,\n    \"max_summary_length\": 300,\n    \"enable_duplicate_detection\": true\n  },\n  \"timeout_seconds\": 180,\n  \"store_results\": true\n}"
							},
							"url": {
								"raw": "{{base_url}}/api/v1/scrape",
								"host": ["{{base_url}}"],
								"path": ["api", "v1", "scrape"]
							}
						},
						"status": "OK",
						"code": 200,
						"_postman_previewlanguage": "json",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"cookie": [],
						"body": "{\n  \"status\": \"success\",\n  \"timestamp\": \"2024-01-01T12:00:00Z\",\n  \"request_id\": \"req_config123\",\n  \"query\": {\n    \"text\": \"AI tools for image generation\",\n    \"category\": \"ai_tools\",\n    \"confidence_score\": 0.93\n  },\n  \"results\": {\n    \"total_items\": 14,\n    \"processed_items\": 11,\n    \"success_rate\": 0.79,\n    \"processed_contents\": []\n  },\n  \"analytics\": {\n    \"pages_scraped\": 16,\n    \"processing_time_breakdown\": {},\n    \"quality_metrics\": {}\n  },\n  \"execution_metadata\": {\n    \"execution_time_ms\": 48900.0,\n    \"stages_timing\": {}\n  },\n  \"cached\": false,\n  \"cache_age_seconds\": 0\n}"
					}
				]
			},
				{
					"name": "With Custom Timeout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"Complex query requiring more time\",\n  \"timeout_seconds\": 240,\n  \"store_results\": true\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
						"description": "Query with custom timeout (30-600 seconds allowed)"
					},
					"response": []
				},
				{
					"name": "No Storage",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"Test query without database storage\",\n  \"timeout_seconds\": 180,\n  \"store_results\": false\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
						"description": "Query without storing results in database (for testing)"
					},
					"response": []
				}
			],
			"description": "Main scraping endpoints with example queries"
		},
		{
			"name": "Metrics & Monitoring",
			"item": [
				{
					"name": "JSON Metrics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"description": "Admin API key required"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/metrics?format=json",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "metrics"],
							"query": [
								{
									"key": "format",
									"value": "json"
								}
							]
						},
						"description": "Get metrics in JSON format (requires admin API key)"
					},
					"response": []
				},
				{
					"name": "Prometheus Metrics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/metrics?format=prometheus",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "metrics"],
							"query": [
								{
									"key": "format",
									"value": "prometheus"
								}
							]
						},
						"description": "Get metrics in Prometheus text format"
					},
					"response": []
				},
				{
					"name": "Metrics Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/metrics/health",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "metrics", "health"]
						},
						"description": "Get metrics system health status"
					},
					"response": []
				},
				{
					"name": "Performance Metrics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"description": "Admin API key required"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/metrics/performance",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "metrics", "performance"]
						},
						"description": "Get detailed performance statistics (requires admin)"
					},
					"response": []
				},
				{
					"name": "Cache Statistics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-API-Key",
								"value": "{{api_key}}",
								"description": "Admin API key required"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/metrics/cache",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "metrics", "cache"]
						},
						"description": "Get detailed cache statistics (requires admin)"
					},
					"response": []
				}
			],
			"description": "Metrics and monitoring endpoints"
		},
		{
			"name": "Error Scenarios",
			"item": [
				{
					"name": "Empty Query",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Status code is 400 for validation error', function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test('Response has error field', function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('error');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
					"description": "Test validation error with empty query (expected: 400)"
				},
				"response": [
					{
						"name": "Validation Error - Empty Query",
						"originalRequest": {
							"method": "POST",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"body": {
								"mode": "raw",
								"raw": "{\n  \"query\": \"\"\n}"
							},
							"url": {
								"raw": "{{base_url}}/api/v1/scrape",
								"host": ["{{base_url}}"],
								"path": ["api", "v1", "scrape"]
							}
						},
						"status": "Bad Request",
						"code": 400,
						"_postman_previewlanguage": "json",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"cookie": [],
						"body": "{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Request validation failed\",\n    \"details\": [\n      {\n        \"error_code\": \"VALIDATION_ERROR\",\n        \"message\": \"Query text cannot be empty\",\n        \"context\": {\n          \"field\": \"query\"\n        },\n        \"recovery_suggestions\": [\n          \"Provide a non-empty query string\",\n          \"Ensure query text is between 1 and 1000 characters\"\n        ]\n      }\n    ]\n  },\n  \"request_id\": \"req_error123\",\n  \"execution_metadata\": {\n    \"execution_time_ms\": 5.2,\n    \"start_time\": \"2024-01-01T12:00:00Z\",\n    \"end_time\": \"2024-01-01T12:00:00.005Z\",\n    \"stages_timing\": {}\n  }\n}"
					}
				]
			},
				{
					"name": "Query Too Long",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									"// Generate a 1001-character string",
									"const longQuery = 'a'.repeat(1001);",
									"pm.variables.set('long_query', longQuery);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"{{long_query}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
						"description": "Test validation error with query exceeding max length (expected: 400)"
					},
					"response": []
				},
				{
					"name": "Invalid Timeout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"Test query\",\n  \"timeout_seconds\": 20\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
					"description": "Test business-rule validation error with timeout < 30 seconds (expected: 400 with VALIDATION_ERROR)"
				},
				"response": [
					{
						"name": "Validation Error - Invalid Timeout",
						"originalRequest": {
							"method": "POST",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"body": {
								"mode": "raw",
								"raw": "{\n  \"query\": \"Test query\",\n  \"timeout_seconds\": 20\n}"
							},
							"url": {
								"raw": "{{base_url}}/api/v1/scrape",
								"host": ["{{base_url}}"],
								"path": ["api", "v1", "scrape"]
							}
						},
						"status": "Bad Request",
						"code": 400,
						"_postman_previewlanguage": "json",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"cookie": [],
						"body": "{\n  \"status\": \"error\",\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Request validation failed\",\n    \"details\": [\n      {\n        \"error_code\": \"VALIDATION_ERROR\",\n        \"message\": \"timeout_seconds must be at least 30 seconds, got 20\",\n        \"context\": {\n          \"field\": \"timeout_seconds\"\n        },\n        \"recovery_suggestions\": [\n          \"Set timeout_seconds to at least 30 seconds\",\n          \"Use a value between 30 and 600 seconds\"\n        ]\n      }\n    ]\n  },\n  \"request_id\": \"req_timeout_error\",\n  \"execution_metadata\": {\n    \"execution_time_ms\": 3.1,\n    \"start_time\": \"2024-01-01T12:00:00Z\",\n    \"end_time\": \"2024-01-01T12:00:00.003Z\",\n    \"stages_timing\": {}\n  }\n}"
					}
				]
			},
				{
					"name": "Invalid Config",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"query\": \"Test query\",\n  \"processing_config\": {\n    \"invalid_field\": \"invalid_value\"\n  }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/scrape",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "scrape"]
						},
						"description": "Test validation error with malformed processing_config (expected: 400)"
					},
					"response": []
				}
			],
			"description": "Error scenario testing endpoints"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "api_key",
			"value": "",
			"type": "string",
			"description": "API key for authentication (optional, required for admin endpoints)"
		}
	]
}

