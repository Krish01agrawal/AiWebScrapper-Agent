# Test Results Directory

## Purpose

This directory stores load test results, analysis reports, and baseline data for performance validation and regression detection.

## File Structure

### Test Result Files

- **`load_test_YYYYMMDD_HHMMSS.json`**: Load test results with timestamp
  - Contains metrics: response times, cache stats, memory usage, connection pool stats
  - Generated by `scripts/test_load_performance.py --save-results`

### Analysis Reports

- **`analysis_YYYYMMDD_HHMMSS.md`**: Analysis reports in Markdown format
  - Generated by `scripts/analyze_load_test_results.py`
  - Contains detailed analysis and recommendations

### Baseline Files

- **`baseline_load_test.json`**: Performance baseline for comparison
  - Used by CI/CD to detect performance regressions
  - Updated automatically on main branch if no regressions detected
  - Should be committed to version control

## Viewing Results

### View JSON Results

```bash
# View latest load test results
cat test_results/load_test_*.json | jq .

# View specific metrics
cat test_results/load_test_*.json | jq '.summary'
cat test_results/load_test_*.json | jq '.response_times'
```

### Generate Analysis Reports

```bash
# Analyze latest results
python scripts/analyze_load_test_results.py \
    --results-file test_results/load_test_20240101_120000.json \
    --format markdown \
    --output test_results/analysis_report.md

# Compare against baseline
python scripts/analyze_load_test_results.py \
    --results-file test_results/load_test_current.json \
    --baseline-file test_results/baseline_load_test.json \
    --format markdown
```

## Baseline Management

### Establishing a Baseline

```bash
# Run load tests and save as baseline
make test-load-baseline
```

This will:
1. Run all load test scenarios
2. Save results to `test_results/load_test_*.json`
3. Copy latest results to `test_results/baseline_load_test.json`

### Updating Baselines

Baselines should be updated when:
- Performance improvements are made
- Infrastructure changes are deployed
- Configuration changes affect performance

**Note:** Baselines are automatically updated in CI/CD on main branch if no regressions are detected.

### Using Baselines

Baselines are used for:
- Performance regression detection in CI/CD
- Comparing current performance against historical baselines
- Tracking performance trends over time

## Retention Policy

### Recommended Retention

- **Test Results**: Keep last 30 days of results
- **Baseline Files**: Keep all baseline files (committed to version control)
- **Analysis Reports**: Keep last 7 days of reports

### Archiving Old Results

```bash
# Archive results older than 30 days
find test_results/ -name "load_test_*.json" -mtime +30 -exec mv {} archive/ \;
```

## Examples

### Example: View Latest Results

```bash
# Get latest test results file
LATEST=$(ls -t test_results/load_test_*.json | head -1)

# View summary
cat $LATEST | jq '.summary'

# View response time percentiles
cat $LATEST | jq '.response_times.percentiles'
```

### Example: Compare Against Baseline

```bash
# Compare current results against baseline
python scripts/analyze_load_test_results.py \
    --results-file test_results/load_test_20240101_120000.json \
    --baseline-file test_results/baseline_load_test.json \
    --format markdown \
    --output test_results/comparison.md
```

### Example: Generate HTML Report

```bash
# Generate HTML report for sharing
python scripts/analyze_load_test_results.py \
    --results-file test_results/load_test_20240101_120000.json \
    --format html \
    --output test_results/report.html
```

## Additional Resources

- [Load Testing Guide](../docs/LOAD_TESTING.md) - Comprehensive load testing documentation
- [Integration Testing Guide](../docs/INTEGRATION_TESTING.md) - Integration testing documentation
- [Real-World Testing Guide](../docs/REAL_WORLD_TESTING.md) - Real-world scenario testing documentation

